{"ast":null,"code":"'use strict';\n\nconst process = require('process');\nconst Timers = require('timers');\nconst Readable = require('stream').Readable;\nconst Command = require('./command.js');\nconst Packets = require('../packets/index.js');\nconst getTextParser = require('../parsers/text_parser.js');\nconst staticParser = require('../parsers/static_text_parser.js');\nconst ServerStatus = require('../constants/server_status.js');\nconst EmptyPacket = new Packets.Packet(0, Buffer.allocUnsafe(4), 0, 4);\n\n// http://dev.mysql.com/doc/internals/en/com-query.html\nclass Query extends Command {\n  constructor(options, callback) {\n    super();\n    this.sql = options.sql;\n    this.values = options.values;\n    this._queryOptions = options;\n    this.namedPlaceholders = options.namedPlaceholders || false;\n    this.onResult = callback;\n    this.timeout = options.timeout;\n    this.queryTimeout = null;\n    this._fieldCount = 0;\n    this._rowParser = null;\n    this._fields = [];\n    this._rows = [];\n    this._receivedFieldsCount = 0;\n    this._resultIndex = 0;\n    this._localStream = null;\n    this._unpipeStream = function () {};\n    this._streamFactory = options.infileStreamFactory;\n    this._connection = null;\n  }\n  then() {\n    const err = \"You have tried to call .then(), .catch(), or invoked await on the result of query that is not a promise, which is a programming error. Try calling con.promise().query(), or require('mysql2/promise') instead of 'mysql2' for a promise-compatible version of the query interface. To learn how to use async/await or Promises check out documentation at https://sidorares.github.io/node-mysql2/docs#using-promise-wrapper, or the mysql2 documentation at https://sidorares.github.io/node-mysql2/docs/documentation/promise-wrapper\";\n    // eslint-disable-next-line\n    console.log(err);\n    throw new Error(err);\n  }\n\n  /* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"^_\" }] */\n  start(_packet, connection) {\n    if (connection.config.debug) {\n      // eslint-disable-next-line\n      console.log('        Sending query command: %s', this.sql);\n    }\n    this._connection = connection;\n    this.options = Object.assign({}, connection.config, this._queryOptions);\n    this._setTimeout();\n    const cmdPacket = new Packets.Query(this.sql, connection.config.charsetNumber);\n    connection.writePacket(cmdPacket.toPacket(1));\n    return Query.prototype.resultsetHeader;\n  }\n  done() {\n    this._unpipeStream();\n    // if all ready timeout, return null directly\n    if (this.timeout && !this.queryTimeout) {\n      return null;\n    }\n    // else clear timer\n    if (this.queryTimeout) {\n      Timers.clearTimeout(this.queryTimeout);\n      this.queryTimeout = null;\n    }\n    if (this.onResult) {\n      let rows, fields;\n      if (this._resultIndex === 0) {\n        rows = this._rows[0];\n        fields = this._fields[0];\n      } else {\n        rows = this._rows;\n        fields = this._fields;\n      }\n      if (fields) {\n        process.nextTick(() => {\n          this.onResult(null, rows, fields);\n        });\n      } else {\n        process.nextTick(() => {\n          this.onResult(null, rows);\n        });\n      }\n    }\n    return null;\n  }\n  doneInsert(rs) {\n    if (this._localStreamError) {\n      if (this.onResult) {\n        this.onResult(this._localStreamError, rs);\n      } else {\n        this.emit('error', this._localStreamError);\n      }\n      return null;\n    }\n    this._rows.push(rs);\n    this._fields.push(void 0);\n    this.emit('fields', void 0);\n    this.emit('result', rs);\n    if (rs.serverStatus & ServerStatus.SERVER_MORE_RESULTS_EXISTS) {\n      this._resultIndex++;\n      return this.resultsetHeader;\n    }\n    return this.done();\n  }\n  resultsetHeader(packet, connection) {\n    const rs = new Packets.ResultSetHeader(packet, connection);\n    this._fieldCount = rs.fieldCount;\n    if (connection.config.debug) {\n      // eslint-disable-next-line\n      console.log(`        Resultset header received, expecting ${rs.fieldCount} column definition packets`);\n    }\n    if (this._fieldCount === 0) {\n      return this.doneInsert(rs);\n    }\n    if (this._fieldCount === null) {\n      return this._streamLocalInfile(connection, rs.infileName);\n    }\n    this._receivedFieldsCount = 0;\n    this._rows.push([]);\n    this._fields.push([]);\n    return this.readField;\n  }\n  _streamLocalInfile(connection, path) {\n    if (this._streamFactory) {\n      this._localStream = this._streamFactory(path);\n    } else {\n      this._localStreamError = new Error(`As a result of LOCAL INFILE command server wants to read ${path} file, but as of v2.0 you must provide streamFactory option returning ReadStream.`);\n      connection.writePacket(EmptyPacket);\n      return this.infileOk;\n    }\n    const onConnectionError = () => {\n      this._unpipeStream();\n    };\n    const onDrain = () => {\n      this._localStream.resume();\n    };\n    const onPause = () => {\n      this._localStream.pause();\n    };\n    const onData = function (data) {\n      const dataWithHeader = Buffer.allocUnsafe(data.length + 4);\n      data.copy(dataWithHeader, 4);\n      connection.writePacket(new Packets.Packet(0, dataWithHeader, 0, dataWithHeader.length));\n    };\n    const onEnd = () => {\n      connection.removeListener('error', onConnectionError);\n      connection.writePacket(EmptyPacket);\n    };\n    const onError = err => {\n      this._localStreamError = err;\n      connection.removeListener('error', onConnectionError);\n      connection.writePacket(EmptyPacket);\n    };\n    this._unpipeStream = () => {\n      connection.stream.removeListener('pause', onPause);\n      connection.stream.removeListener('drain', onDrain);\n      this._localStream.removeListener('data', onData);\n      this._localStream.removeListener('end', onEnd);\n      this._localStream.removeListener('error', onError);\n    };\n    connection.stream.on('pause', onPause);\n    connection.stream.on('drain', onDrain);\n    this._localStream.on('data', onData);\n    this._localStream.on('end', onEnd);\n    this._localStream.on('error', onError);\n    connection.once('error', onConnectionError);\n    return this.infileOk;\n  }\n  readField(packet, connection) {\n    this._receivedFieldsCount++;\n    // Often there is much more data in the column definition than in the row itself\n    // If you set manually _fields[0] to array of ColumnDefinition's (from previous call)\n    // you can 'cache' result of parsing. Field packets still received, but ignored in that case\n    // this is the reason _receivedFieldsCount exist (otherwise we could just use current length of fields array)\n    if (this._fields[this._resultIndex].length !== this._fieldCount) {\n      const field = new Packets.ColumnDefinition(packet, connection.clientEncoding);\n      this._fields[this._resultIndex].push(field);\n      if (connection.config.debug) {\n        /* eslint-disable no-console */\n        console.log('        Column definition:');\n        console.log(`          name: ${field.name}`);\n        console.log(`          type: ${field.columnType}`);\n        console.log(`         flags: ${field.flags}`);\n        /* eslint-enable no-console */\n      }\n    }\n    // last field received\n    if (this._receivedFieldsCount === this._fieldCount) {\n      const fields = this._fields[this._resultIndex];\n      this.emit('fields', fields);\n      if (this.options.disableEval) {\n        this._rowParser = staticParser(fields, this.options, connection.config);\n      } else {\n        this._rowParser = new (getTextParser(fields, this.options, connection.config))(fields);\n      }\n      return Query.prototype.fieldsEOF;\n    }\n    return Query.prototype.readField;\n  }\n  fieldsEOF(packet, connection) {\n    // check EOF\n    if (!packet.isEOF()) {\n      return connection.protocolError('Expected EOF packet');\n    }\n    return this.row;\n  }\n\n  /* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"^_\" }] */\n  row(packet, _connection) {\n    if (packet.isEOF()) {\n      const status = packet.eofStatusFlags();\n      const moreResults = status & ServerStatus.SERVER_MORE_RESULTS_EXISTS;\n      if (moreResults) {\n        this._resultIndex++;\n        return Query.prototype.resultsetHeader;\n      }\n      return this.done();\n    }\n    let row;\n    try {\n      row = this._rowParser.next(packet, this._fields[this._resultIndex], this.options);\n    } catch (err) {\n      this._localStreamError = err;\n      return this.doneInsert(null);\n    }\n    if (this.onResult) {\n      this._rows[this._resultIndex].push(row);\n    } else {\n      this.emit('result', row, this._resultIndex);\n    }\n    return Query.prototype.row;\n  }\n  infileOk(packet, connection) {\n    const rs = new Packets.ResultSetHeader(packet, connection);\n    return this.doneInsert(rs);\n  }\n  stream(options) {\n    options = options || {};\n    options.objectMode = true;\n    const stream = new Readable(options);\n    stream._read = () => {\n      this._connection && this._connection.resume();\n    };\n    this.on('result', (row, resultSetIndex) => {\n      if (!stream.push(row)) {\n        this._connection.pause();\n      }\n      stream.emit('result', row, resultSetIndex); // replicate old emitter\n    });\n    this.on('error', err => {\n      stream.emit('error', err); // Pass on any errors\n    });\n    this.on('end', () => {\n      stream.push(null); // pushing null, indicating EOF\n    });\n    this.on('fields', fields => {\n      stream.emit('fields', fields); // replicate old emitter\n    });\n    stream.on('end', () => {\n      stream.emit('close');\n    });\n    return stream;\n  }\n  _setTimeout() {\n    if (this.timeout) {\n      const timeoutHandler = this._handleTimeoutError.bind(this);\n      this.queryTimeout = Timers.setTimeout(timeoutHandler, this.timeout);\n    }\n  }\n  _handleTimeoutError() {\n    if (this.queryTimeout) {\n      Timers.clearTimeout(this.queryTimeout);\n      this.queryTimeout = null;\n    }\n    const err = new Error('Query inactivity timeout');\n    err.errorno = 'PROTOCOL_SEQUENCE_TIMEOUT';\n    err.code = 'PROTOCOL_SEQUENCE_TIMEOUT';\n    err.syscall = 'query';\n    if (this.onResult) {\n      this.onResult(err);\n    } else {\n      this.emit('error', err);\n    }\n  }\n}\nQuery.prototype.catch = Query.prototype.then;\nmodule.exports = Query;","map":{"version":3,"names":["process","require","Timers","Readable","Command","Packets","getTextParser","staticParser","ServerStatus","EmptyPacket","Packet","Buffer","allocUnsafe","Query","constructor","options","callback","sql","values","_queryOptions","namedPlaceholders","onResult","timeout","queryTimeout","_fieldCount","_rowParser","_fields","_rows","_receivedFieldsCount","_resultIndex","_localStream","_unpipeStream","_streamFactory","infileStreamFactory","_connection","then","err","console","log","Error","start","_packet","connection","config","debug","Object","assign","_setTimeout","cmdPacket","charsetNumber","writePacket","toPacket","prototype","resultsetHeader","done","clearTimeout","rows","fields","nextTick","doneInsert","rs","_localStreamError","emit","push","serverStatus","SERVER_MORE_RESULTS_EXISTS","packet","ResultSetHeader","fieldCount","_streamLocalInfile","infileName","readField","path","infileOk","onConnectionError","onDrain","resume","onPause","pause","onData","data","dataWithHeader","length","copy","onEnd","removeListener","onError","stream","on","once","field","ColumnDefinition","clientEncoding","name","columnType","flags","disableEval","fieldsEOF","isEOF","protocolError","row","status","eofStatusFlags","moreResults","next","objectMode","_read","resultSetIndex","timeoutHandler","_handleTimeoutError","bind","setTimeout","errorno","code","syscall","catch","module","exports"],"sources":["D:/Customer Query Assistant/Customer Query Assistant/client/node_modules/mysql2/lib/commands/query.js"],"sourcesContent":["'use strict';\n\nconst process = require('process');\nconst Timers = require('timers');\n\nconst Readable = require('stream').Readable;\n\nconst Command = require('./command.js');\nconst Packets = require('../packets/index.js');\nconst getTextParser = require('../parsers/text_parser.js');\nconst staticParser = require('../parsers/static_text_parser.js');\nconst ServerStatus = require('../constants/server_status.js');\n\nconst EmptyPacket = new Packets.Packet(0, Buffer.allocUnsafe(4), 0, 4);\n\n// http://dev.mysql.com/doc/internals/en/com-query.html\nclass Query extends Command {\n  constructor(options, callback) {\n    super();\n    this.sql = options.sql;\n    this.values = options.values;\n    this._queryOptions = options;\n    this.namedPlaceholders = options.namedPlaceholders || false;\n    this.onResult = callback;\n    this.timeout = options.timeout;\n    this.queryTimeout = null;\n    this._fieldCount = 0;\n    this._rowParser = null;\n    this._fields = [];\n    this._rows = [];\n    this._receivedFieldsCount = 0;\n    this._resultIndex = 0;\n    this._localStream = null;\n    this._unpipeStream = function () {};\n    this._streamFactory = options.infileStreamFactory;\n    this._connection = null;\n  }\n\n  then() {\n    const err =\n      \"You have tried to call .then(), .catch(), or invoked await on the result of query that is not a promise, which is a programming error. Try calling con.promise().query(), or require('mysql2/promise') instead of 'mysql2' for a promise-compatible version of the query interface. To learn how to use async/await or Promises check out documentation at https://sidorares.github.io/node-mysql2/docs#using-promise-wrapper, or the mysql2 documentation at https://sidorares.github.io/node-mysql2/docs/documentation/promise-wrapper\";\n    // eslint-disable-next-line\n    console.log(err);\n    throw new Error(err);\n  }\n\n  /* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"^_\" }] */\n  start(_packet, connection) {\n    if (connection.config.debug) {\n      // eslint-disable-next-line\n      console.log('        Sending query command: %s', this.sql);\n    }\n    this._connection = connection;\n    this.options = Object.assign({}, connection.config, this._queryOptions);\n    this._setTimeout();\n\n    const cmdPacket = new Packets.Query(\n      this.sql,\n      connection.config.charsetNumber\n    );\n    connection.writePacket(cmdPacket.toPacket(1));\n    return Query.prototype.resultsetHeader;\n  }\n\n  done() {\n    this._unpipeStream();\n    // if all ready timeout, return null directly\n    if (this.timeout && !this.queryTimeout) {\n      return null;\n    }\n    // else clear timer\n    if (this.queryTimeout) {\n      Timers.clearTimeout(this.queryTimeout);\n      this.queryTimeout = null;\n    }\n    if (this.onResult) {\n      let rows, fields;\n      if (this._resultIndex === 0) {\n        rows = this._rows[0];\n        fields = this._fields[0];\n      } else {\n        rows = this._rows;\n        fields = this._fields;\n      }\n      if (fields) {\n        process.nextTick(() => {\n          this.onResult(null, rows, fields);\n        });\n      } else {\n        process.nextTick(() => {\n          this.onResult(null, rows);\n        });\n      }\n    }\n    return null;\n  }\n\n  doneInsert(rs) {\n    if (this._localStreamError) {\n      if (this.onResult) {\n        this.onResult(this._localStreamError, rs);\n      } else {\n        this.emit('error', this._localStreamError);\n      }\n      return null;\n    }\n    this._rows.push(rs);\n    this._fields.push(void 0);\n    this.emit('fields', void 0);\n    this.emit('result', rs);\n    if (rs.serverStatus & ServerStatus.SERVER_MORE_RESULTS_EXISTS) {\n      this._resultIndex++;\n      return this.resultsetHeader;\n    }\n    return this.done();\n  }\n\n  resultsetHeader(packet, connection) {\n    const rs = new Packets.ResultSetHeader(packet, connection);\n    this._fieldCount = rs.fieldCount;\n    if (connection.config.debug) {\n      // eslint-disable-next-line\n      console.log(\n        `        Resultset header received, expecting ${rs.fieldCount} column definition packets`\n      );\n    }\n    if (this._fieldCount === 0) {\n      return this.doneInsert(rs);\n    }\n    if (this._fieldCount === null) {\n      return this._streamLocalInfile(connection, rs.infileName);\n    }\n    this._receivedFieldsCount = 0;\n    this._rows.push([]);\n    this._fields.push([]);\n    return this.readField;\n  }\n\n  _streamLocalInfile(connection, path) {\n    if (this._streamFactory) {\n      this._localStream = this._streamFactory(path);\n    } else {\n      this._localStreamError = new Error(\n        `As a result of LOCAL INFILE command server wants to read ${path} file, but as of v2.0 you must provide streamFactory option returning ReadStream.`\n      );\n      connection.writePacket(EmptyPacket);\n      return this.infileOk;\n    }\n\n    const onConnectionError = () => {\n      this._unpipeStream();\n    };\n    const onDrain = () => {\n      this._localStream.resume();\n    };\n    const onPause = () => {\n      this._localStream.pause();\n    };\n    const onData = function (data) {\n      const dataWithHeader = Buffer.allocUnsafe(data.length + 4);\n      data.copy(dataWithHeader, 4);\n      connection.writePacket(\n        new Packets.Packet(0, dataWithHeader, 0, dataWithHeader.length)\n      );\n    };\n    const onEnd = () => {\n      connection.removeListener('error', onConnectionError);\n      connection.writePacket(EmptyPacket);\n    };\n    const onError = (err) => {\n      this._localStreamError = err;\n      connection.removeListener('error', onConnectionError);\n      connection.writePacket(EmptyPacket);\n    };\n    this._unpipeStream = () => {\n      connection.stream.removeListener('pause', onPause);\n      connection.stream.removeListener('drain', onDrain);\n      this._localStream.removeListener('data', onData);\n      this._localStream.removeListener('end', onEnd);\n      this._localStream.removeListener('error', onError);\n    };\n    connection.stream.on('pause', onPause);\n    connection.stream.on('drain', onDrain);\n    this._localStream.on('data', onData);\n    this._localStream.on('end', onEnd);\n    this._localStream.on('error', onError);\n    connection.once('error', onConnectionError);\n    return this.infileOk;\n  }\n\n  readField(packet, connection) {\n    this._receivedFieldsCount++;\n    // Often there is much more data in the column definition than in the row itself\n    // If you set manually _fields[0] to array of ColumnDefinition's (from previous call)\n    // you can 'cache' result of parsing. Field packets still received, but ignored in that case\n    // this is the reason _receivedFieldsCount exist (otherwise we could just use current length of fields array)\n    if (this._fields[this._resultIndex].length !== this._fieldCount) {\n      const field = new Packets.ColumnDefinition(\n        packet,\n        connection.clientEncoding\n      );\n      this._fields[this._resultIndex].push(field);\n      if (connection.config.debug) {\n        /* eslint-disable no-console */\n        console.log('        Column definition:');\n        console.log(`          name: ${field.name}`);\n        console.log(`          type: ${field.columnType}`);\n        console.log(`         flags: ${field.flags}`);\n        /* eslint-enable no-console */\n      }\n    }\n    // last field received\n    if (this._receivedFieldsCount === this._fieldCount) {\n      const fields = this._fields[this._resultIndex];\n      this.emit('fields', fields);\n      if (this.options.disableEval) {\n        this._rowParser = staticParser(fields, this.options, connection.config);\n      } else {\n        this._rowParser = new (getTextParser(\n          fields,\n          this.options,\n          connection.config\n        ))(fields);\n      }\n      return Query.prototype.fieldsEOF;\n    }\n    return Query.prototype.readField;\n  }\n\n  fieldsEOF(packet, connection) {\n    // check EOF\n    if (!packet.isEOF()) {\n      return connection.protocolError('Expected EOF packet');\n    }\n    return this.row;\n  }\n\n  /* eslint no-unused-vars: [\"error\", { \"argsIgnorePattern\": \"^_\" }] */\n  row(packet, _connection) {\n    if (packet.isEOF()) {\n      const status = packet.eofStatusFlags();\n      const moreResults = status & ServerStatus.SERVER_MORE_RESULTS_EXISTS;\n      if (moreResults) {\n        this._resultIndex++;\n        return Query.prototype.resultsetHeader;\n      }\n      return this.done();\n    }\n    let row;\n    try {\n      row = this._rowParser.next(\n        packet,\n        this._fields[this._resultIndex],\n        this.options\n      );\n    } catch (err) {\n      this._localStreamError = err;\n      return this.doneInsert(null);\n    }\n    if (this.onResult) {\n      this._rows[this._resultIndex].push(row);\n    } else {\n      this.emit('result', row, this._resultIndex);\n    }\n    return Query.prototype.row;\n  }\n\n  infileOk(packet, connection) {\n    const rs = new Packets.ResultSetHeader(packet, connection);\n    return this.doneInsert(rs);\n  }\n\n  stream(options) {\n    options = options || {};\n    options.objectMode = true;\n    const stream = new Readable(options);\n    stream._read = () => {\n      this._connection && this._connection.resume();\n    };\n    this.on('result', (row, resultSetIndex) => {\n      if (!stream.push(row)) {\n        this._connection.pause();\n      }\n      stream.emit('result', row, resultSetIndex); // replicate old emitter\n    });\n    this.on('error', (err) => {\n      stream.emit('error', err); // Pass on any errors\n    });\n    this.on('end', () => {\n      stream.push(null); // pushing null, indicating EOF\n    });\n    this.on('fields', (fields) => {\n      stream.emit('fields', fields); // replicate old emitter\n    });\n    stream.on('end', () => {\n      stream.emit('close');\n    });\n    return stream;\n  }\n\n  _setTimeout() {\n    if (this.timeout) {\n      const timeoutHandler = this._handleTimeoutError.bind(this);\n      this.queryTimeout = Timers.setTimeout(timeoutHandler, this.timeout);\n    }\n  }\n\n  _handleTimeoutError() {\n    if (this.queryTimeout) {\n      Timers.clearTimeout(this.queryTimeout);\n      this.queryTimeout = null;\n    }\n\n    const err = new Error('Query inactivity timeout');\n    err.errorno = 'PROTOCOL_SEQUENCE_TIMEOUT';\n    err.code = 'PROTOCOL_SEQUENCE_TIMEOUT';\n    err.syscall = 'query';\n\n    if (this.onResult) {\n      this.onResult(err);\n    } else {\n      this.emit('error', err);\n    }\n  }\n}\n\nQuery.prototype.catch = Query.prototype.then;\n\nmodule.exports = Query;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}